<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>HTTP Server Reference &mdash; aiohttp 0.18.2- documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://media.readthedocs.org/css/badge_only.css" type="text/css" />
    <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.18.2-',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
    <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>
    <link rel="shortcut icon" href="_static/aiohttp-icon.ico"/>
    <link rel="top" title="aiohttp 0.18.2- documentation" href="index.html" />
    <link rel="next" title="Low-level HTTP Server" href="server.html" />
    <link rel="prev" title="HTTP Server Usage" href="web.html" />

   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

<!-- RTD Extra Head -->

    
    

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://aiohttp.readthedocs.org/en/stable/web_reference.html" />
<script type="text/javascript">
  // This is included here because other places don't have access to the pagename variable.
  var READTHEDOCS_DATA = {
    project: "aiohttp",
    version: "stable",
    language: "en",
    page: "web_reference",
    builder: "sphinx",
    theme: "alabaster",
    docroot: "/docs/",
    
    source_suffix: ".rst",
    
    api_host: "https://readthedocs.org/",
    commit: "4ae656a9"
  }
  // Old variables
  var doc_version = "stable";
  var doc_slug = "aiohttp";
  var page_name = "web_reference";
  var html_theme = "alabaster";
</script>
<!-- RTD Analytics Code -->
<!-- Included in the header because you don't have a footer block. -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17997319-1']);
  _gaq.push(['_trackPageview']);


  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- end RTD Analytics Code -->
<!-- end RTD <extrahead> -->

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="http-server-reference">
<span id="aiohttp-web-reference"></span><h1>HTTP Server Reference<a class="headerlink" href="#http-server-reference" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-aiohttp.web"></span><div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.12: </span>The module was deeply refactored in backward incompatible manner.</p>
</div>
<div class="section" id="request">
<span id="aiohttp-web-request"></span><h2>Request<a class="headerlink" href="#request" title="Permalink to this headline">¶</a></h2>
<p>The Request object contains all the information about an incoming HTTP request.</p>
<p>Every <a class="reference internal" href="web.html#aiohttp-web-handler"><span>handler</span></a> accepts a request instance as the
first positional parameter.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should never create the <a class="reference internal" href="#aiohttp.web.Request" title="aiohttp.web.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> instance manually &#8211;
<a class="reference internal" href="#module-aiohttp.web" title="aiohttp.web"><code class="xref py py-mod docutils literal"><span class="pre">aiohttp.web</span></code></a> does it for you.</p>
</div>
<dl class="class">
<dt id="aiohttp.web.Request">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">Request</code><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#Request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Request" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="aiohttp.web.Request.scheme">
<code class="descname">scheme</code><a class="headerlink" href="#aiohttp.web.Request.scheme" title="Permalink to this definition">¶</a></dt>
<dd><p>A string representing the scheme of the request.</p>
<p>The scheme is <code class="docutils literal"><span class="pre">'https'</span></code> if transport for request handling is
<em>SSL</em> or <code class="docutils literal"><span class="pre">secure_proxy_ssl_header</span></code> is matching.</p>
<p><code class="docutils literal"><span class="pre">'http'</span></code> otherwise.</p>
<p>Read-only <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.method">
<code class="descname">method</code><a class="headerlink" href="#aiohttp.web.Request.method" title="Permalink to this definition">¶</a></dt>
<dd><p><em>HTTP method</em>, read-only property.</p>
<p>The value is upper-cased <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> like <code class="docutils literal"><span class="pre">&quot;GET&quot;</span></code>,
<code class="docutils literal"><span class="pre">&quot;POST&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;PUT&quot;</span></code> etc.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.version">
<code class="descname">version</code><a class="headerlink" href="#aiohttp.web.Request.version" title="Permalink to this definition">¶</a></dt>
<dd><p><em>HTTP version</em> of request, Read-only property.</p>
<p>Returns <a class="reference internal" href="api.html#aiohttp.protocol.HttpVersion" title="aiohttp.protocol.HttpVersion"><code class="xref py py-class docutils literal"><span class="pre">aiohttp.protocol.HttpVersion</span></code></a> instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.host">
<code class="descname">host</code><a class="headerlink" href="#aiohttp.web.Request.host" title="Permalink to this definition">¶</a></dt>
<dd><p><em>HOST</em> header of request, Read-only property.</p>
<p>Returns <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> or <code class="docutils literal"><span class="pre">None</span></code> if HTTP request has no <em>HOST</em> header.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.path_qs">
<code class="descname">path_qs</code><a class="headerlink" href="#aiohttp.web.Request.path_qs" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL including PATH_INFO and the query string. e.g, <code class="docutils literal"><span class="pre">/app/blog?id=10</span></code></p>
<p>Read-only <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.path">
<code class="descname">path</code><a class="headerlink" href="#aiohttp.web.Request.path" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL including <em>PATH INFO</em> without the host or scheme. e.g.,
<code class="docutils literal"><span class="pre">/app/blog</span></code>. The path is URL-unquoted. For raw path info see
<a class="reference internal" href="#aiohttp.web.Request.raw_path" title="aiohttp.web.Request.raw_path"><code class="xref py py-attr docutils literal"><span class="pre">raw_path</span></code></a>.</p>
<p>Read-only <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.raw_path">
<code class="descname">raw_path</code><a class="headerlink" href="#aiohttp.web.Request.raw_path" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL including raw <em>PATH INFO</em> without the host or scheme.
Warning, the path may be quoted and may contains non valid URL
characters, e.g.
<code class="docutils literal"><span class="pre">/my%2Fpath%7Cwith%21some%25strange%24characters</span></code>.</p>
<p>For unquoted version please take a look on <a class="reference internal" href="#aiohttp.web.Request.path" title="aiohttp.web.Request.path"><code class="xref py py-attr docutils literal"><span class="pre">path</span></code></a>.</p>
<p>Read-only <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.query_string">
<code class="descname">query_string</code><a class="headerlink" href="#aiohttp.web.Request.query_string" title="Permalink to this definition">¶</a></dt>
<dd><p>The query string in the URL, e.g., <code class="docutils literal"><span class="pre">id=10</span></code></p>
<p>Read-only <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.GET">
<code class="descname">GET</code><a class="headerlink" href="#aiohttp.web.Request.GET" title="Permalink to this definition">¶</a></dt>
<dd><p>A multidict with all the variables in the query string.</p>
<p>Read-only <a class="reference internal" href="multidict.html#aiohttp.MultiDictProxy" title="aiohttp.MultiDictProxy"><code class="xref py py-class docutils literal"><span class="pre">MultiDictProxy</span></code></a> lazy property.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.17: </span>A multidict contains empty items for query string like <code class="docutils literal"><span class="pre">?arg=</span></code>.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.POST">
<code class="descname">POST</code><a class="headerlink" href="#aiohttp.web.Request.POST" title="Permalink to this definition">¶</a></dt>
<dd><p>A multidict with all the variables in the POST parameters.
POST property available only after <a class="reference internal" href="#aiohttp.web.Request.post" title="aiohttp.web.Request.post"><code class="xref py py-meth docutils literal"><span class="pre">Request.post()</span></code></a> coroutine call.</p>
<p>Read-only <a class="reference internal" href="multidict.html#aiohttp.MultiDictProxy" title="aiohttp.MultiDictProxy"><code class="xref py py-class docutils literal"><span class="pre">MultiDictProxy</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Raises <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.5)">RuntimeError</a>:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">if <a class="reference internal" href="#aiohttp.web.Request.post" title="aiohttp.web.Request.post"><code class="xref py py-meth docutils literal"><span class="pre">Request.post()</span></code></a> was not called before accessing the property.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.headers">
<code class="descname">headers</code><a class="headerlink" href="#aiohttp.web.Request.headers" title="Permalink to this definition">¶</a></dt>
<dd><p>A case-insensitive multidict proxy with all headers.</p>
<p>Read-only <a class="reference internal" href="multidict.html#aiohttp.CIMultiDictProxy" title="aiohttp.CIMultiDictProxy"><code class="xref py py-class docutils literal"><span class="pre">CIMultiDictProxy</span></code></a> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.keep_alive">
<code class="descname">keep_alive</code><a class="headerlink" href="#aiohttp.web.Request.keep_alive" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal"><span class="pre">True</span></code> if keep-alive connection enabled by HTTP client and
protocol version supports it, otherwise <code class="docutils literal"><span class="pre">False</span></code>.</p>
<p>Read-only <a class="reference external" href="http://docs.python.org/3/library/functions.html#bool" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bool</span></code></a> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.match_info">
<code class="descname">match_info</code><a class="headerlink" href="#aiohttp.web.Request.match_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property with <code class="xref py py-class docutils literal"><span class="pre">AbstractMatchInfo</span></code>
instance for result of route resolving.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Exact type of property depends on used router.  If
<code class="docutils literal"><span class="pre">app.router</span></code> is <a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal"><span class="pre">UrlDispatcher</span></code></a> the property contains
<a class="reference internal" href="#aiohttp.web.UrlMappingMatchInfo" title="aiohttp.web.UrlMappingMatchInfo"><code class="xref py py-class docutils literal"><span class="pre">UrlMappingMatchInfo</span></code></a> instance.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.app">
<code class="descname">app</code><a class="headerlink" href="#aiohttp.web.Request.app" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal"><span class="pre">Application</span></code></a> instance used to call <a class="reference internal" href="web.html#aiohttp-web-handler"><span>request handler</span></a>, Read-only property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.transport">
<code class="descname">transport</code><a class="headerlink" href="#aiohttp.web.Request.transport" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference external" href="http://docs.python.org/3/library/asyncio-protocol.html#asyncio-transport" title="(in Python v3.5)"><span class="xref std std-ref">transport</span></a> used to process request,
Read-only property.</p>
<p>The property can be used, for example, for getting IP address of
client&#8217;s peer:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">peername</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">get_extra_info</span><span class="p">(</span><span class="s">&#39;peername&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">peername</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">host</span><span class="p">,</span> <span class="n">port</span> <span class="o">=</span> <span class="n">peername</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.cookies">
<code class="descname">cookies</code><a class="headerlink" href="#aiohttp.web.Request.cookies" title="Permalink to this definition">¶</a></dt>
<dd><p>A multidict of all request&#8217;s cookies.</p>
<p>Read-only <a class="reference internal" href="multidict.html#aiohttp.MultiDictProxy" title="aiohttp.MultiDictProxy"><code class="xref py py-class docutils literal"><span class="pre">MultiDictProxy</span></code></a> lazy property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.content">
<code class="descname">content</code><a class="headerlink" href="#aiohttp.web.Request.content" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="api.html#aiohttp.streams.FlowControlStreamReader" title="aiohttp.streams.FlowControlStreamReader"><code class="xref py py-class docutils literal"><span class="pre">FlowControlStreamReader</span></code></a> instance,
input stream for reading request&#8217;s <em>BODY</em>.</p>
<p>Read-only property.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.15.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.has_body">
<code class="descname">has_body</code><a class="headerlink" href="#aiohttp.web.Request.has_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal"><span class="pre">True</span></code> if request has <em>HTTP BODY</em>, <code class="docutils literal"><span class="pre">False</span></code> otherwise.</p>
<p>Read-only <a class="reference external" href="http://docs.python.org/3/library/functions.html#bool" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bool</span></code></a> property.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.16.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.payload">
<code class="descname">payload</code><a class="headerlink" href="#aiohttp.web.Request.payload" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="api.html#aiohttp.streams.FlowControlStreamReader" title="aiohttp.streams.FlowControlStreamReader"><code class="xref py py-class docutils literal"><span class="pre">FlowControlStreamReader</span></code></a> instance,
input stream for reading request&#8217;s <em>BODY</em>.</p>
<p>Read-only property.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.15: </span>Use <a class="reference internal" href="#aiohttp.web.Request.content" title="aiohttp.web.Request.content"><code class="xref py py-attr docutils literal"><span class="pre">content</span></code></a> instead.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.content_type">
<code class="descname">content_type</code><a class="headerlink" href="#aiohttp.web.Request.content_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property with <em>content</em> part of <em>Content-Type</em> header.</p>
<p>Returns <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> like <code class="docutils literal"><span class="pre">'text/html'</span></code></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Returns value is <code class="docutils literal"><span class="pre">'application/octet-stream'</span></code> if no
Content-Type header present in HTTP headers according to
<span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2616.html"><strong>RFC 2616</strong></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.charset">
<code class="descname">charset</code><a class="headerlink" href="#aiohttp.web.Request.charset" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that specifies the <em>encoding</em> for the request&#8217;s BODY.</p>
<p>The value is parsed from the <em>Content-Type</em> HTTP header.</p>
<p>Returns <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> like <code class="docutils literal"><span class="pre">'utf-8'</span></code> or <code class="docutils literal"><span class="pre">None</span></code> if
<em>Content-Type</em> has no charset information.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.content_length">
<code class="descname">content_length</code><a class="headerlink" href="#aiohttp.web.Request.content_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that returns length of the request&#8217;s BODY.</p>
<p>The value is parsed from the <em>Content-Length</em> HTTP header.</p>
<p>Returns <a class="reference external" href="http://docs.python.org/3/library/functions.html#int" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">int</span></code></a> or <code class="docutils literal"><span class="pre">None</span></code> if <em>Content-Length</em> is absent.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.if_modified_since">
<code class="descname">if_modified_since</code><a class="headerlink" href="#aiohttp.web.Request.if_modified_since" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that returns the date specified in the
<em>If-Modified-Since</em> header.</p>
<p>Returns <a class="reference external" href="http://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></code></a> or <code class="docutils literal"><span class="pre">None</span></code> if
<em>If-Modified-Since</em> header is absent or is not a valid
HTTP date.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.Request.read">
<em class="property">coroutine </em><code class="descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#Request.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Request.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read request body, returns <a class="reference external" href="http://docs.python.org/3/library/functions.html#bytes" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a> object with body content.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The method <strong>does</strong> store read data internally, subsequent
<a class="reference internal" href="#aiohttp.web.Request.read" title="aiohttp.web.Request.read"><code class="xref py py-meth docutils literal"><span class="pre">read()</span></code></a> call will return the same value.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.Request.text">
<em class="property">coroutine </em><code class="descname">text</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#Request.text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Request.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Read request body, decode it using <a class="reference internal" href="#aiohttp.web.Request.charset" title="aiohttp.web.Request.charset"><code class="xref py py-attr docutils literal"><span class="pre">charset</span></code></a> encoding or
<code class="docutils literal"><span class="pre">UTF-8</span></code> if no encoding was specified in <em>MIME-type</em>.</p>
<p>Returns <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> with body content.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The method <strong>does</strong> store read data internally, subsequent
<a class="reference internal" href="#aiohttp.web.Request.text" title="aiohttp.web.Request.text"><code class="xref py py-meth docutils literal"><span class="pre">text()</span></code></a> call will return the same value.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.Request.json">
<em class="property">coroutine </em><code class="descname">json</code><span class="sig-paren">(</span><em>*</em>, <em>loader=json.loads</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#Request.json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Request.json" title="Permalink to this definition">¶</a></dt>
<dd><p>Read request body decoded as <em>json</em>.</p>
<p>The method is just a boilerplate <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#coroutine" title="(in Python v3.5)"><span class="xref std std-ref">coroutine</span></a>
implemented as:</p>
<div class="highlight-python"><div class="highlight"><pre>async def json(self, *, loader=json.loads):
    body = await self.text()
    return loader(body)
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>loader</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#callable" title="(in Python v3.5)"><em>callable</em></a>) &#8211; any <a class="reference internal" href="glossary.html#term-callable"><span class="xref std std-term">callable</span></a> that accepts
<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> and returns <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a>
with parsed JSON (<a class="reference external" href="http://docs.python.org/3/library/json.html#json.loads" title="(in Python v3.5)"><code class="xref py py-func docutils literal"><span class="pre">json.loads()</span></code></a> by
default).</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The method <strong>does</strong> store read data internally, subsequent
<a class="reference internal" href="#aiohttp.web.Request.json" title="aiohttp.web.Request.json"><code class="xref py py-meth docutils literal"><span class="pre">json()</span></code></a> call will return the same value.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.Request.post">
<em class="property">coroutine </em><code class="descname">post</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#Request.post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Request.post" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#coroutine" title="(in Python v3.5)"><span class="xref std std-ref">coroutine</span></a> that reads POST parameters from
request body.</p>
<p>Returns <a class="reference internal" href="multidict.html#aiohttp.MultiDictProxy" title="aiohttp.MultiDictProxy"><code class="xref py py-class docutils literal"><span class="pre">MultiDictProxy</span></code></a> instance filled
with parsed data.</p>
<p>If <a class="reference internal" href="#aiohttp.web.Request.method" title="aiohttp.web.Request.method"><code class="xref py py-attr docutils literal"><span class="pre">method</span></code></a> is not <em>POST</em>, <em>PUT</em> or <em>PATCH</em> or
<a class="reference internal" href="#aiohttp.web.Request.content_type" title="aiohttp.web.Request.content_type"><code class="xref py py-attr docutils literal"><span class="pre">content_type</span></code></a> is not empty or
<em>application/x-www-form-urlencoded</em> or <em>multipart/form-data</em>
returns empty multidict.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The method <strong>does</strong> store read data internally, subsequent
<a class="reference internal" href="#aiohttp.web.Request.post" title="aiohttp.web.Request.post"><code class="xref py py-meth docutils literal"><span class="pre">post()</span></code></a> call will return the same value.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.Request.release">
<em class="property">coroutine </em><code class="descname">release</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#Request.release"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Request.release" title="Permalink to this definition">¶</a></dt>
<dd><p>Release request.</p>
<p>Eat unread part of HTTP BODY if present.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">User code may never call <a class="reference internal" href="#aiohttp.web.Request.release" title="aiohttp.web.Request.release"><code class="xref py py-meth docutils literal"><span class="pre">release()</span></code></a>, all
required work will be processed by <a class="reference internal" href="#module-aiohttp.web" title="aiohttp.web"><code class="xref py py-mod docutils literal"><span class="pre">aiohttp.web</span></code></a>
internal machinery.</p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="response-classes">
<span id="aiohttp-web-response"></span><h2>Response classes<a class="headerlink" href="#response-classes" title="Permalink to this headline">¶</a></h2>
<p>For now, <a class="reference internal" href="#module-aiohttp.web" title="aiohttp.web"><code class="xref py py-mod docutils literal"><span class="pre">aiohttp.web</span></code></a> has two classes for the <em>HTTP response</em>:
<a class="reference internal" href="#aiohttp.web.StreamResponse" title="aiohttp.web.StreamResponse"><code class="xref py py-class docutils literal"><span class="pre">StreamResponse</span></code></a> and <a class="reference internal" href="#aiohttp.web.Response" title="aiohttp.web.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a>.</p>
<p>Usually you need to use the second one. <a class="reference internal" href="#aiohttp.web.StreamResponse" title="aiohttp.web.StreamResponse"><code class="xref py py-class docutils literal"><span class="pre">StreamResponse</span></code></a> is
intended for streaming data, while <a class="reference internal" href="#aiohttp.web.Response" title="aiohttp.web.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> contains <em>HTTP
BODY</em> as an attribute and sends own content as single piece with the
correct <em>Content-Length HTTP header</em>.</p>
<p>For sake of design decisions <a class="reference internal" href="#aiohttp.web.Response" title="aiohttp.web.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> is derived from
<a class="reference internal" href="#aiohttp.web.StreamResponse" title="aiohttp.web.StreamResponse"><code class="xref py py-class docutils literal"><span class="pre">StreamResponse</span></code></a> parent class.</p>
<p>The response supports <em>keep-alive</em> handling out-of-the-box if
<em>request</em> supports it.</p>
<p>You can disable <em>keep-alive</em> by <a class="reference internal" href="#aiohttp.web.StreamResponse.force_close" title="aiohttp.web.StreamResponse.force_close"><code class="xref py py-meth docutils literal"><span class="pre">force_close()</span></code></a> though.</p>
<p>The common case for sending an answer from
<a class="reference internal" href="web.html#aiohttp-web-handler"><span>web-handler</span></a> is returning a
<a class="reference internal" href="#aiohttp.web.Response" title="aiohttp.web.Response"><code class="xref py py-class docutils literal"><span class="pre">Response</span></code></a> instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="s">&quot;All right!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="streamresponse">
<h3>StreamResponse<a class="headerlink" href="#streamresponse" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="aiohttp.web.StreamResponse">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">StreamResponse</code><span class="sig-paren">(</span><em>*</em>, <em>status=200</em>, <em>reason=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#StreamResponse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class for the <em>HTTP response</em> handling.</p>
<p>Contains methods for setting <em>HTTP response headers</em>, <em>cookies</em>,
<em>response status code</em>, writing <em>HTTP response BODY</em> and so on.</p>
<p>The most important thing you should know about <em>response</em> &#8212; it
is <em>Finite State Machine</em>.</p>
<p>That means you can do any manipulations with <em>headers</em>, <em>cookies</em>
and <em>status code</em> only before <a class="reference internal" href="#aiohttp.web.StreamResponse.prepare" title="aiohttp.web.StreamResponse.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a> coroutine is called.</p>
<p>Once you call <a class="reference internal" href="#aiohttp.web.StreamResponse.prepare" title="aiohttp.web.StreamResponse.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a> any change of
the <em>HTTP header</em> part will raise <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.5)"><code class="xref py py-exc docutils literal"><span class="pre">RuntimeError</span></code></a> exception.</p>
<p>Any <a class="reference internal" href="#aiohttp.web.StreamResponse.write" title="aiohttp.web.StreamResponse.write"><code class="xref py py-meth docutils literal"><span class="pre">write()</span></code></a> call after <a class="reference internal" href="#aiohttp.web.StreamResponse.write_eof" title="aiohttp.web.StreamResponse.write_eof"><code class="xref py py-meth docutils literal"><span class="pre">write_eof()</span></code></a> is also forbidden.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>status</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) &#8211; HTTP status code, <code class="docutils literal"><span class="pre">200</span></code> by default.</li>
<li><strong>reason</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; HTTP reason. If param is <code class="docutils literal"><span class="pre">None</span></code> reason will be
calculated basing on <em>status</em>
parameter. Otherwise pass <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> with
arbitrary <em>status</em> explanation..</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.prepared">
<code class="descname">prepared</code><a class="headerlink" href="#aiohttp.web.StreamResponse.prepared" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only <a class="reference external" href="http://docs.python.org/3/library/functions.html#bool" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bool</span></code></a> property, <code class="docutils literal"><span class="pre">True</span></code> if <a class="reference internal" href="#aiohttp.web.StreamResponse.prepare" title="aiohttp.web.StreamResponse.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a> has
been called, <code class="docutils literal"><span class="pre">False</span></code> otherwise.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.18.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.started">
<code class="descname">started</code><a class="headerlink" href="#aiohttp.web.StreamResponse.started" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated alias for <a class="reference internal" href="#aiohttp.web.StreamResponse.prepared" title="aiohttp.web.StreamResponse.prepared"><code class="xref py py-attr docutils literal"><span class="pre">prepared</span></code></a>.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.18.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.status">
<code class="descname">status</code><a class="headerlink" href="#aiohttp.web.StreamResponse.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property for <em>HTTP response status code</em>, <a class="reference external" href="http://docs.python.org/3/library/functions.html#int" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">int</span></code></a>.</p>
<p><code class="docutils literal"><span class="pre">200</span></code> (OK) by default.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.reason">
<code class="descname">reason</code><a class="headerlink" href="#aiohttp.web.StreamResponse.reason" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property for <em>HTTP response reason</em>, <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.set_status">
<code class="descname">set_status</code><span class="sig-paren">(</span><em>status</em>, <em>reason=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#StreamResponse.set_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.set_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Set <a class="reference internal" href="#aiohttp.web.StreamResponse.status" title="aiohttp.web.StreamResponse.status"><code class="xref py py-attr docutils literal"><span class="pre">status</span></code></a> and <a class="reference internal" href="#aiohttp.web.StreamResponse.reason" title="aiohttp.web.StreamResponse.reason"><code class="xref py py-attr docutils literal"><span class="pre">reason</span></code></a>.</p>
<p><em>reason</em> value is auto calculated if not specified (<code class="docutils literal"><span class="pre">None</span></code>).</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.keep_alive">
<code class="descname">keep_alive</code><a class="headerlink" href="#aiohttp.web.StreamResponse.keep_alive" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property, copy of <a class="reference internal" href="#aiohttp.web.Request.keep_alive" title="aiohttp.web.Request.keep_alive"><code class="xref py py-attr docutils literal"><span class="pre">Request.keep_alive</span></code></a> by default.</p>
<p>Can be switched to <code class="docutils literal"><span class="pre">False</span></code> by <a class="reference internal" href="#aiohttp.web.StreamResponse.force_close" title="aiohttp.web.StreamResponse.force_close"><code class="xref py py-meth docutils literal"><span class="pre">force_close()</span></code></a> call.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.force_close">
<code class="descname">force_close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#StreamResponse.force_close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.force_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable <a class="reference internal" href="#aiohttp.web.StreamResponse.keep_alive" title="aiohttp.web.StreamResponse.keep_alive"><code class="xref py py-attr docutils literal"><span class="pre">keep_alive</span></code></a> for connection. There are no ways to
enable it back.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.compression">
<code class="descname">compression</code><a class="headerlink" href="#aiohttp.web.StreamResponse.compression" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only <a class="reference external" href="http://docs.python.org/3/library/functions.html#bool" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bool</span></code></a> property, <code class="docutils literal"><span class="pre">True</span></code> if compression is enabled.</p>
<p><code class="docutils literal"><span class="pre">False</span></code> by default.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.14.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp.web.StreamResponse.enable_compression" title="aiohttp.web.StreamResponse.enable_compression"><code class="xref py py-meth docutils literal"><span class="pre">enable_compression()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.enable_compression">
<code class="descname">enable_compression</code><span class="sig-paren">(</span><em>force=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#StreamResponse.enable_compression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.enable_compression" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable compression.</p>
<p>When <em>force</em> is unset compression encoding is selected based on
the request&#8217;s <em>Accept-Encoding</em> header.</p>
<p><em>Accept-Encoding</em> is not checked if <em>force</em> is set to a
<a class="reference internal" href="#aiohttp.web.ContentCoding" title="aiohttp.web.ContentCoding"><code class="xref py py-class docutils literal"><span class="pre">ContentCoding</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.14.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp.web.StreamResponse.compression" title="aiohttp.web.StreamResponse.compression"><code class="xref py py-attr docutils literal"><span class="pre">compression</span></code></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.chunked">
<code class="descname">chunked</code><a class="headerlink" href="#aiohttp.web.StreamResponse.chunked" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property, indicates if chunked encoding is on.</p>
<p>Can be enabled by <a class="reference internal" href="#aiohttp.web.StreamResponse.enable_chunked_encoding" title="aiohttp.web.StreamResponse.enable_chunked_encoding"><code class="xref py py-meth docutils literal"><span class="pre">enable_chunked_encoding()</span></code></a> call.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.14.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp.web.StreamResponse.enable_chunked_encoding" title="aiohttp.web.StreamResponse.enable_chunked_encoding"><code class="xref py py-attr docutils literal"><span class="pre">enable_chunked_encoding</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.enable_chunked_encoding">
<code class="descname">enable_chunked_encoding</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#StreamResponse.enable_chunked_encoding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.enable_chunked_encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables <a class="reference internal" href="#aiohttp.web.StreamResponse.chunked" title="aiohttp.web.StreamResponse.chunked"><code class="xref py py-attr docutils literal"><span class="pre">chunked</span></code></a> encoding for response. There are no ways to
disable it back. With enabled <a class="reference internal" href="#aiohttp.web.StreamResponse.chunked" title="aiohttp.web.StreamResponse.chunked"><code class="xref py py-attr docutils literal"><span class="pre">chunked</span></code></a> encoding each <cite>write()</cite>
operation encoded in separate chunk.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.14.</span></p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>chunked encoding can be enabled for <code class="docutils literal"><span class="pre">HTTP/1.1</span></code> only.</p>
<p class="last">Setting up both <a class="reference internal" href="#aiohttp.web.StreamResponse.content_length" title="aiohttp.web.StreamResponse.content_length"><code class="xref py py-attr docutils literal"><span class="pre">content_length</span></code></a> and chunked
encoding is mutually exclusive.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp.web.StreamResponse.chunked" title="aiohttp.web.StreamResponse.chunked"><code class="xref py py-attr docutils literal"><span class="pre">chunked</span></code></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.headers">
<code class="descname">headers</code><a class="headerlink" href="#aiohttp.web.StreamResponse.headers" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="multidict.html#aiohttp.CIMultiDict" title="aiohttp.CIMultiDict"><code class="xref py py-class docutils literal"><span class="pre">CIMultiDict</span></code></a> instance
for <em>outgoing</em> <em>HTTP headers</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.cookies">
<code class="descname">cookies</code><a class="headerlink" href="#aiohttp.web.StreamResponse.cookies" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <a class="reference external" href="http://docs.python.org/3/library/http.cookies.html#http.cookies.SimpleCookie" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">http.cookies.SimpleCookie</span></code></a> for <em>outgoing</em> cookies.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Direct setting up <em>Set-Cookie</em> header may be overwritten by
explicit calls to cookie manipulation.</p>
<p class="last">We are encourage using of <a class="reference internal" href="#aiohttp.web.StreamResponse.cookies" title="aiohttp.web.StreamResponse.cookies"><code class="xref py py-attr docutils literal"><span class="pre">cookies</span></code></a> and
<a class="reference internal" href="#aiohttp.web.StreamResponse.set_cookie" title="aiohttp.web.StreamResponse.set_cookie"><code class="xref py py-meth docutils literal"><span class="pre">set_cookie()</span></code></a>, <a class="reference internal" href="#aiohttp.web.StreamResponse.del_cookie" title="aiohttp.web.StreamResponse.del_cookie"><code class="xref py py-meth docutils literal"><span class="pre">del_cookie()</span></code></a> for cookie
manipulations.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.set_cookie">
<code class="descname">set_cookie</code><span class="sig-paren">(</span><em>name</em>, <em>value</em>, <em>*</em>, <em>path='/'</em>, <em>expires=None</em>, <em>domain=None</em>, <em>max_age=None</em>, <em>secure=None</em>, <em>httponly=None</em>, <em>version=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#StreamResponse.set_cookie"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.set_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenient way for setting <a class="reference internal" href="#aiohttp.web.StreamResponse.cookies" title="aiohttp.web.StreamResponse.cookies"><code class="xref py py-attr docutils literal"><span class="pre">cookies</span></code></a>, allows to specify
some additional properties like <em>max_age</em> in a single call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; cookie name</li>
<li><strong>value</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; cookie value (will be converted to
<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> if value has another type).</li>
<li><strong>expires</strong> &#8211; expiration date (optional)</li>
<li><strong>domain</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; cookie domain (optional)</li>
<li><strong>max_age</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) &#8211; defines the lifetime of the cookie, in
seconds.  The delta-seconds value is a
decimal non- negative integer.  After
delta-seconds seconds elapse, the client
should discard the cookie.  A value of zero
means the cookie should be discarded
immediately.  (optional)</li>
<li><strong>path</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; specifies the subset of URLs to
which this cookie applies. (optional, <code class="docutils literal"><span class="pre">'/'</span></code> by default)</li>
<li><strong>secure</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) &#8211; attribute (with no value) directs
the user agent to use only (unspecified)
secure means to contact the origin server
whenever it sends back this cookie.
The user agent (possibly under the user&#8217;s
control) may determine what level of
security it considers appropriate for
&#8220;secure&#8221; cookies.  The <em>secure</em> should be
considered security advice from the server
to the user agent, indicating that it is in
the session&#8217;s interest to protect the cookie
contents. (optional)</li>
<li><strong>httponly</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#bool" title="(in Python v3.5)"><em>bool</em></a>) &#8211; <code class="docutils literal"><span class="pre">True</span></code> if the cookie HTTP only (optional)</li>
<li><strong>version</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) &#8211; a decimal integer, identifies to which
version of the state management
specification the cookie
conforms. (Optional, <em>version=1</em> by default)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.14.3: </span>Default value for <em>path</em> changed from <code class="docutils literal"><span class="pre">None</span></code> to <code class="docutils literal"><span class="pre">'/'</span></code>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.del_cookie">
<code class="descname">del_cookie</code><span class="sig-paren">(</span><em>name</em>, <em>*</em>, <em>path='/'</em>, <em>domain=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#StreamResponse.del_cookie"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.del_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes cookie.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; cookie name</li>
<li><strong>domain</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; optional cookie domain</li>
<li><strong>path</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; optional cookie path, <code class="docutils literal"><span class="pre">'/'</span></code> by default</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.14.3: </span>Default value for <em>path</em> changed from <code class="docutils literal"><span class="pre">None</span></code> to <code class="docutils literal"><span class="pre">'/'</span></code>.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.content_length">
<code class="descname">content_length</code><a class="headerlink" href="#aiohttp.web.StreamResponse.content_length" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Content-Length</em> for outgoing response.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.content_type">
<code class="descname">content_type</code><a class="headerlink" href="#aiohttp.web.StreamResponse.content_type" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Content</em> part of <em>Content-Type</em> for outgoing response.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.charset">
<code class="descname">charset</code><a class="headerlink" href="#aiohttp.web.StreamResponse.charset" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Charset</em> aka <em>encoding</em> part of <em>Content-Type</em> for outgoing response.</p>
<p>The value converted to lower-case on attribute assigning.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.last_modified">
<code class="descname">last_modified</code><a class="headerlink" href="#aiohttp.web.StreamResponse.last_modified" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Last-Modified</em> header for outgoing response.</p>
<p>This property accepts raw <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> values,
<a class="reference external" href="http://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></code></a> objects, Unix timestamps specified
as an <a class="reference external" href="http://docs.python.org/3/library/functions.html#int" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">int</span></code></a> or a <a class="reference external" href="http://docs.python.org/3/library/functions.html#float" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">float</span></code></a> object, and the
value <code class="docutils literal"><span class="pre">None</span></code> to unset the header.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.start">
<code class="descname">start</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#StreamResponse.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.start" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> (<a class="reference internal" href="#aiohttp.web.Request" title="aiohttp.web.Request"><em>aiohttp.web.Request</em></a>) &#8211; HTTP request object, that the
response answers.</td>
</tr>
</tbody>
</table>
<p>Send <em>HTTP header</em>. You should not change any header data after
calling this method.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.18: </span>Use <a class="reference internal" href="#aiohttp.web.StreamResponse.prepare" title="aiohttp.web.StreamResponse.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a> instead.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The method doesn&#8217;t call
<code class="xref py py-attr docutils literal"><span class="pre">web.Application.on_response_prepare</span></code> signal, use
<a class="reference internal" href="#aiohttp.web.StreamResponse.prepare" title="aiohttp.web.StreamResponse.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a> instead.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.prepare">
<em class="property">coroutine </em><code class="descname">prepare</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#StreamResponse.prepare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.prepare" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> (<a class="reference internal" href="#aiohttp.web.Request" title="aiohttp.web.Request"><em>aiohttp.web.Request</em></a>) &#8211; HTTP request object, that the
response answers.</td>
</tr>
</tbody>
</table>
<p>Send <em>HTTP header</em>. You should not change any header data after
calling this method.</p>
<p>The coroutine calls <code class="xref py py-attr docutils literal"><span class="pre">web.Application.on_response_prepare</span></code>
signal handlers.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.18.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#StreamResponse.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Send byte-ish data as the part of <em>response BODY</em>.</p>
<p><a class="reference internal" href="#aiohttp.web.StreamResponse.prepare" title="aiohttp.web.StreamResponse.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a> must be called before.</p>
<p>Raises <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.5)"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code></a> if data is not <a class="reference external" href="http://docs.python.org/3/library/functions.html#bytes" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a>,
<a class="reference external" href="http://docs.python.org/3/library/functions.html#bytearray" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bytearray</span></code></a> or <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#memoryview" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">memoryview</span></code></a> instance.</p>
<p>Raises <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.5)"><code class="xref py py-exc docutils literal"><span class="pre">RuntimeError</span></code></a> if <a class="reference internal" href="#aiohttp.web.StreamResponse.prepare" title="aiohttp.web.StreamResponse.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a> has not been called.</p>
<p>Raises <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.5)"><code class="xref py py-exc docutils literal"><span class="pre">RuntimeError</span></code></a> if <a class="reference internal" href="#aiohttp.web.StreamResponse.write_eof" title="aiohttp.web.StreamResponse.write_eof"><code class="xref py py-meth docutils literal"><span class="pre">write_eof()</span></code></a> has been called.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.drain">
<em class="property">coroutine </em><code class="descname">drain</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#StreamResponse.drain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.drain" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#coroutine" title="(in Python v3.5)"><span class="xref std std-ref">coroutine</span></a> to let the write buffer of the
underlying transport a chance to be flushed.</p>
<p>The intended use is to write:</p>
<div class="highlight-python"><div class="highlight"><pre>resp.write(data)
await resp.drain()
</pre></div>
</div>
<p>Yielding from <a class="reference internal" href="#aiohttp.web.StreamResponse.drain" title="aiohttp.web.StreamResponse.drain"><code class="xref py py-meth docutils literal"><span class="pre">drain()</span></code></a> gives the opportunity for the loop
to schedule the write operation and flush the buffer. It should
especially be used when a possibly large amount of data is
written to the transport, and the coroutine does not yield-from
between calls to <a class="reference internal" href="#aiohttp.web.StreamResponse.write" title="aiohttp.web.StreamResponse.write"><code class="xref py py-meth docutils literal"><span class="pre">write()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.14.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.write_eof">
<em class="property">coroutine </em><code class="descname">write_eof</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#StreamResponse.write_eof"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.write_eof" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#coroutine" title="(in Python v3.5)"><span class="xref std std-ref">coroutine</span></a> <em>may</em> be called as a mark of the
<em>HTTP response</em> processing finish.</p>
<p><em>Internal machinery</em> will call this method at the end of
the request processing if needed.</p>
<p>After <a class="reference internal" href="#aiohttp.web.StreamResponse.write_eof" title="aiohttp.web.StreamResponse.write_eof"><code class="xref py py-meth docutils literal"><span class="pre">write_eof()</span></code></a> call any manipulations with the <em>response</em>
object are forbidden.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="response">
<h3>Response<a class="headerlink" href="#response" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="aiohttp.web.Response">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">Response</code><span class="sig-paren">(</span><em>*</em>, <em>status=200</em>, <em>headers=None</em>, <em>content_type=None</em>, <em>body=None</em>, <em>text=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#Response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Response" title="Permalink to this definition">¶</a></dt>
<dd><p>The most usable response class, inherited from <a class="reference internal" href="#aiohttp.web.StreamResponse" title="aiohttp.web.StreamResponse"><code class="xref py py-class docutils literal"><span class="pre">StreamResponse</span></code></a>.</p>
<p>Accepts <em>body</em> argument for setting the <em>HTTP response BODY</em>.</p>
<p>The actual <a class="reference internal" href="#aiohttp.web.Response.body" title="aiohttp.web.Response.body"><code class="xref py py-attr docutils literal"><span class="pre">body</span></code></a> sending happens in overridden
<a class="reference internal" href="#aiohttp.web.StreamResponse.write_eof" title="aiohttp.web.StreamResponse.write_eof"><code class="xref py py-meth docutils literal"><span class="pre">write_eof()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>body</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#bytes" title="(in Python v3.5)"><em>bytes</em></a>) &#8211; response&#8217;s BODY</li>
<li><strong>status</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) &#8211; HTTP status code, 200 OK by default.</li>
<li><strong>headers</strong> (<a class="reference external" href="http://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping" title="(in Python v3.5)"><em>collections.abc.Mapping</em></a>) &#8211; HTTP headers that should be added to
response&#8217;s ones.</li>
<li><strong>text</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; response&#8217;s BODY</li>
<li><strong>content_type</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; response&#8217;s content type</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="aiohttp.web.Response.body">
<code class="descname">body</code><a class="headerlink" href="#aiohttp.web.Response.body" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-write attribute for storing response&#8217;s content aka BODY,
<a class="reference external" href="http://docs.python.org/3/library/functions.html#bytes" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a>.</p>
<p>Setting <a class="reference internal" href="#aiohttp.web.Response.body" title="aiohttp.web.Response.body"><code class="xref py py-attr docutils literal"><span class="pre">body</span></code></a> also recalculates
<a class="reference internal" href="#aiohttp.web.StreamResponse.content_length" title="aiohttp.web.StreamResponse.content_length"><code class="xref py py-attr docutils literal"><span class="pre">content_length</span></code></a> value.</p>
<p>Resetting <a class="reference internal" href="#aiohttp.web.Response.body" title="aiohttp.web.Response.body"><code class="xref py py-attr docutils literal"><span class="pre">body</span></code></a> (assigning <code class="docutils literal"><span class="pre">None</span></code>) sets
<a class="reference internal" href="#aiohttp.web.StreamResponse.content_length" title="aiohttp.web.StreamResponse.content_length"><code class="xref py py-attr docutils literal"><span class="pre">content_length</span></code></a> to <code class="docutils literal"><span class="pre">None</span></code> too, dropping
<em>Content-Length</em> HTTP header.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Response.text">
<code class="descname">text</code><a class="headerlink" href="#aiohttp.web.Response.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-write attribute for storing response&#8217;s content, represented as str,
<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a>.</p>
<p>Setting <code class="xref py py-attr docutils literal"><span class="pre">str</span></code> also recalculates
<a class="reference internal" href="#aiohttp.web.StreamResponse.content_length" title="aiohttp.web.StreamResponse.content_length"><code class="xref py py-attr docutils literal"><span class="pre">content_length</span></code></a> value and
<code class="xref py py-attr docutils literal"><span class="pre">body</span></code> value</p>
<p>Resetting <a class="reference internal" href="#aiohttp.web.Response.body" title="aiohttp.web.Response.body"><code class="xref py py-attr docutils literal"><span class="pre">body</span></code></a> (assigning <code class="docutils literal"><span class="pre">None</span></code>) sets
<a class="reference internal" href="#aiohttp.web.StreamResponse.content_length" title="aiohttp.web.StreamResponse.content_length"><code class="xref py py-attr docutils literal"><span class="pre">content_length</span></code></a> to <code class="docutils literal"><span class="pre">None</span></code> too, dropping
<em>Content-Length</em> HTTP header.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="websocketresponse">
<h3>WebSocketResponse<a class="headerlink" href="#websocketresponse" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="aiohttp.web.WebSocketResponse">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">WebSocketResponse</code><span class="sig-paren">(</span><em>*</em>, <em>timeout=10.0</em>, <em>autoclose=True</em>, <em>autoping=True</em>, <em>protocols=()</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for handling server-side websockets.</p>
<p>After starting (by <a class="reference internal" href="#aiohttp.web.WebSocketResponse.prepare" title="aiohttp.web.WebSocketResponse.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a> call) the response you
cannot use <a class="reference internal" href="#aiohttp.web.StreamResponse.write" title="aiohttp.web.StreamResponse.write"><code class="xref py py-meth docutils literal"><span class="pre">write()</span></code></a> method but should to
communicate with websocket client by <a class="reference internal" href="#aiohttp.web.WebSocketResponse.send_str" title="aiohttp.web.WebSocketResponse.send_str"><code class="xref py py-meth docutils literal"><span class="pre">send_str()</span></code></a>,
<a class="reference internal" href="#aiohttp.web.WebSocketResponse.receive" title="aiohttp.web.WebSocketResponse.receive"><code class="xref py py-meth docutils literal"><span class="pre">receive()</span></code></a> and others.</p>
<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.prepare">
<em class="property">coroutine </em><code class="descname">prepare</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.prepare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts websocket. After the call you can use websocket methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> (<a class="reference internal" href="#aiohttp.web.Request" title="aiohttp.web.Request"><em>aiohttp.web.Request</em></a>) &#8211; HTTP request object, that the
response answers.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises HTTPException:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">if websocket handshake has failed.</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.18.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.start">
<code class="descname">start</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts websocket. After the call you can use websocket methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> (<a class="reference internal" href="#aiohttp.web.Request" title="aiohttp.web.Request"><em>aiohttp.web.Request</em></a>) &#8211; HTTP request object, that the
response answers.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises HTTPException:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">if websocket handshake has failed.</td>
</tr>
</tbody>
</table>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.18: </span>Use <a class="reference internal" href="#aiohttp.web.WebSocketResponse.prepare" title="aiohttp.web.WebSocketResponse.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a> instead.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.can_prepare">
<code class="descname">can_prepare</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.can_prepare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.can_prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs checks for <em>request</em> data to figure out if websocket
can be started on the request.</p>
<p>If <a class="reference internal" href="#aiohttp.web.WebSocketResponse.can_prepare" title="aiohttp.web.WebSocketResponse.can_prepare"><code class="xref py py-meth docutils literal"><span class="pre">can_prepare()</span></code></a> call is success then <a class="reference internal" href="#aiohttp.web.WebSocketResponse.prepare" title="aiohttp.web.WebSocketResponse.prepare"><code class="xref py py-meth docutils literal"><span class="pre">prepare()</span></code></a> will
success too.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> (<a class="reference internal" href="#aiohttp.web.Request" title="aiohttp.web.Request"><em>aiohttp.web.Request</em></a>) &#8211; HTTP request object, that the
response answers.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><code class="docutils literal"><span class="pre">(ok,</span> <span class="pre">protocol)</span></code> pair, <em>ok</em> is <code class="docutils literal"><span class="pre">True</span></code> on success,
<em>protocol</em> is websocket subprotocol which is passed by
client and accepted by server (one of <em>protocols</em>
sequence from <a class="reference internal" href="#aiohttp.web.WebSocketResponse" title="aiohttp.web.WebSocketResponse"><code class="xref py py-class docutils literal"><span class="pre">WebSocketResponse</span></code></a> ctor). <em>protocol</em> may be
<code class="docutils literal"><span class="pre">None</span></code> if client and server subprotocols are nit overlapping.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The method never raises exception.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.can_start">
<code class="descname">can_start</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.can_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.can_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated alias for <a class="reference internal" href="#aiohttp.web.WebSocketResponse.can_prepare" title="aiohttp.web.WebSocketResponse.can_prepare"><code class="xref py py-meth docutils literal"><span class="pre">can_prepare()</span></code></a></p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.18.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.WebSocketResponse.closed">
<code class="descname">closed</code><a class="headerlink" href="#aiohttp.web.WebSocketResponse.closed" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property, <code class="docutils literal"><span class="pre">True</span></code> if connection has been closed or in process
of closing.
<code class="xref py py-const docutils literal"><span class="pre">MSG_CLOSE</span></code> message has been received from peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.WebSocketResponse.close_code">
<code class="descname">close_code</code><a class="headerlink" href="#aiohttp.web.WebSocketResponse.close_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property, close code from peer. It is set to <code class="docutils literal"><span class="pre">None</span></code> on
opened connection.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.WebSocketResponse.protocol">
<code class="descname">protocol</code><a class="headerlink" href="#aiohttp.web.WebSocketResponse.protocol" title="Permalink to this definition">¶</a></dt>
<dd><p>Websocket <em>subprotocol</em> chosen after <a class="reference internal" href="#aiohttp.web.WebSocketResponse.start" title="aiohttp.web.WebSocketResponse.start"><code class="xref py py-meth docutils literal"><span class="pre">start()</span></code></a> call.</p>
<p>May be <code class="docutils literal"><span class="pre">None</span></code> if server and client protocols are
not overlapping.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.exception">
<code class="descname">exception</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.exception"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns last occurred exception or None.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.ping">
<code class="descname">ping</code><span class="sig-paren">(</span><em>message=b''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.ping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.ping" title="Permalink to this definition">¶</a></dt>
<dd><p>Send <code class="xref py py-const docutils literal"><span class="pre">MSG_PING</span></code> to peer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> &#8211; optional payload of <em>ping</em> message,
<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> (converted to <em>UTF-8</em> encoded bytes)
or <a class="reference external" href="http://docs.python.org/3/library/functions.html#bytes" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a>.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.5)">RuntimeError</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">if connections is not started or closing.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.pong">
<code class="descname">pong</code><span class="sig-paren">(</span><em>message=b''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.pong"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.pong" title="Permalink to this definition">¶</a></dt>
<dd><p>Send <em>unsolicited</em> <code class="xref py py-const docutils literal"><span class="pre">MSG_PONG</span></code> to peer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> &#8211; optional payload of <em>pong</em> message,
<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> (converted to <em>UTF-8</em> encoded bytes)
or <a class="reference external" href="http://docs.python.org/3/library/functions.html#bytes" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a>.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.5)">RuntimeError</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">if connections is not started or closing.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.send_str">
<code class="descname">send_str</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.send_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.send_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Send <em>data</em> to peer as <code class="xref py py-const docutils literal"><span class="pre">MSG_TEXT</span></code> message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; data to send.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.5)"><strong>RuntimeError</strong></a> &#8211; if connection is not started or closing</li>
<li><a class="reference external" href="http://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.5)"><strong>TypeError</strong></a> &#8211; if data is not <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.send_bytes">
<code class="descname">send_bytes</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.send_bytes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.send_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Send <em>data</em> to peer as <code class="xref py py-const docutils literal"><span class="pre">MSG_BINARY</span></code> message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> &#8211; data to send.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.5)"><strong>RuntimeError</strong></a> &#8211; if connection is not started or closing</li>
<li><a class="reference external" href="http://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.5)"><strong>TypeError</strong></a> &#8211; if data is not <a class="reference external" href="http://docs.python.org/3/library/functions.html#bytes" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a>,
<a class="reference external" href="http://docs.python.org/3/library/functions.html#bytearray" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bytearray</span></code></a> or <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#memoryview" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">memoryview</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.close">
<em class="property">coroutine </em><code class="descname">close</code><span class="sig-paren">(</span><em>*</em>, <em>code=1000</em>, <em>message=b''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.close" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#coroutine" title="(in Python v3.5)"><span class="xref std std-ref">coroutine</span></a> that initiates closing
handshake by sending <code class="xref py py-const docutils literal"><span class="pre">MSG_CLOSE</span></code> message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>code</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) &#8211; closing code</li>
<li><strong>message</strong> &#8211; optional payload of <em>pong</em> message,
<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> (converted to <em>UTF-8</em> encoded bytes)
or <a class="reference external" href="http://docs.python.org/3/library/functions.html#bytes" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.5)">RuntimeError</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last">if connection is not started or closing</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.receive">
<em class="property">coroutine </em><code class="descname">receive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.receive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.receive" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#coroutine" title="(in Python v3.5)"><span class="xref std std-ref">coroutine</span></a> that waits upcoming <em>data</em>
message from peer and returns it.</p>
<p>The coroutine implicitly handles
<code class="xref py py-const docutils literal"><span class="pre">MSG_PING</span></code>,
<code class="xref py py-const docutils literal"><span class="pre">MSG_PONG</span></code> and
<code class="xref py py-const docutils literal"><span class="pre">MSG_CLOSE</span></code> without returning the
message.</p>
<p>It process <em>ping-pong game</em> and performs <em>closing handshake</em> internally.</p>
<p>After websocket closing raises
<a class="reference internal" href="api.html#aiohttp.errors.WSClientDisconnectedError" title="aiohttp.errors.WSClientDisconnectedError"><code class="xref py py-exc docutils literal"><span class="pre">WSClientDisconnectedError</span></code></a> with
connection closing data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference internal" href="api.html#aiohttp.websocket.Message" title="aiohttp.websocket.Message"><code class="xref py py-class docutils literal"><span class="pre">Message</span></code></a></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.5)">RuntimeError</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">if connection is not started</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body"><a class="reference internal" href="api.html#aiohttp.errors.WSClientDisconnectedError" title="aiohttp.errors.WSClientDisconnectedError"><code class="xref py py-exc docutils literal"><span class="pre">WSClientDisconnectedError</span></code></a> on closing.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.receive_str">
<em class="property">coroutine </em><code class="descname">receive_str</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.receive_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.receive_str" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#coroutine" title="(in Python v3.5)"><span class="xref std std-ref">coroutine</span></a> that calls <code class="xref py py-meth docutils literal"><span class="pre">receive_mgs()</span></code> but
also asserts the message type is
<code class="xref py py-const docutils literal"><span class="pre">MSG_TEXT</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return str:</th><td class="field-body">peer&#8217;s message content.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.5)">TypeError</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">if message is <code class="xref py py-const docutils literal"><span class="pre">MSG_BINARY</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.receive_bytes">
<em class="property">coroutine </em><code class="descname">receive_bytes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.receive_bytes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.receive_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#coroutine" title="(in Python v3.5)"><span class="xref std std-ref">coroutine</span></a> that calls <code class="xref py py-meth docutils literal"><span class="pre">receive_mgs()</span></code> but
also asserts the message type is
<code class="xref py py-const docutils literal"><span class="pre">MSG_BINARY</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return bytes:</th><td class="field-body">peer&#8217;s message content.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.5)">TypeError</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">if message is <code class="xref py py-const docutils literal"><span class="pre">MSG_TEXT</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<div class="versionadded">
<p><span class="versionmodified">New in version 0.14.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web.html#aiohttp-web-websockets"><span>WebSockets handling</span></a></p>
</div>
</div>
</div>
<div class="section" id="application-and-router">
<span id="aiohttp-web-app-and-router"></span><h2>Application and Router<a class="headerlink" href="#application-and-router" title="Permalink to this headline">¶</a></h2>
<div class="section" id="application">
<h3>Application<a class="headerlink" href="#application" title="Permalink to this headline">¶</a></h3>
<p>Application is a synonym for web-server.</p>
<p>To get fully working example, you have to make <em>application</em>, register
supported urls in <em>router</em> and create a <em>server socket</em> with
<code class="xref py py-class docutils literal"><span class="pre">aiohttp.RequestHandlerFactory</span></code> as a <em>protocol
factory</em>. <em>RequestHandlerFactory</em> could be constructed with
<code class="xref py py-meth docutils literal"><span class="pre">make_handler()</span></code>.</p>
<p><em>Application</em> contains a <em>router</em> instance and a list of callbacks that
will be called during application finishing.</p>
<p><em>Application</em> is a <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a>, so you can use it as registry for
arbitrary properties for later access from
<a class="reference internal" href="web.html#aiohttp-web-handler"><span>handler</span></a> via <a class="reference internal" href="#aiohttp.web.Request.app" title="aiohttp.web.Request.app"><code class="xref py py-attr docutils literal"><span class="pre">Request.app</span></code></a> property:</p>
<div class="highlight-python"><div class="highlight"><pre>app = Application(loop=loop)
app[&#39;database&#39;] = await aiopg.create_engine(**db_config)

async def handler(request):
    with (await request.app[&#39;database&#39;]) as conn:
        conn.execute(&quot;DELETE * FROM table&quot;)
</pre></div>
</div>
<dl class="class">
<dt id="aiohttp.web.Application">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">Application</code><span class="sig-paren">(</span><em>*</em>, <em>loop=None</em>, <em>router=None</em>, <em>logger=&lt;default&gt;</em>, <em>middlewares=()</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web.html#Application"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Application" title="Permalink to this definition">¶</a></dt>
<dd><p>The class inherits <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>loop</strong> &#8211; <p><a class="reference external" href="http://docs.python.org/3/library/asyncio-eventloop.html#asyncio-event-loop" title="(in Python v3.5)"><span class="xref std std-ref">event loop</span></a> used
for processing HTTP requests.</p>
<p>If param is <code class="docutils literal"><span class="pre">None</span></code> <a class="reference external" href="http://docs.python.org/3/library/asyncio-eventloops.html#asyncio.get_event_loop" title="(in Python v3.5)"><code class="xref py py-func docutils literal"><span class="pre">asyncio.get_event_loop()</span></code></a>
used for getting default event loop, but we strongly
recommend to use explicit loops everywhere.</p>
</li>
<li><strong>router</strong> &#8211; <code class="xref py py-class docutils literal"><span class="pre">aiohttp.abc.AbstractRouter</span></code> instance, the system
creates <a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal"><span class="pre">UrlDispatcher</span></code></a> by default if
<em>router</em> is <code class="docutils literal"><span class="pre">None</span></code>.</li>
<li><strong>logger</strong> &#8211; <p><a class="reference external" href="http://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">logging.Logger</span></code></a> instance for storing application logs.</p>
<p>By default the value is <code class="docutils literal"><span class="pre">logging.getLogger(&quot;aiohttp.web&quot;)</span></code></p>
</li>
<li><strong>middlewares</strong> &#8211; <p><a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> of middleware factories, see
<a class="reference internal" href="web.html#aiohttp-web-middlewares"><span>Middlewares</span></a> for details.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.13.</span></p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="aiohttp.web.Application.router">
<code class="descname">router</code><a class="headerlink" href="#aiohttp.web.Application.router" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that returns <em>router instance</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Application.logger">
<code class="descname">logger</code><a class="headerlink" href="#aiohttp.web.Application.logger" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="http://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">logging.Logger</span></code></a> instance for storing application logs.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Application.loop">
<code class="descname">loop</code><a class="headerlink" href="#aiohttp.web.Application.loop" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="http://docs.python.org/3/library/asyncio-eventloop.html#asyncio-event-loop" title="(in Python v3.5)"><span class="xref std std-ref">event loop</span></a> used for processing HTTP requests.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Application.on_response_prepare">
<code class="descname">on_response_prepare</code><a class="headerlink" href="#aiohttp.web.Application.on_response_prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="api.html#aiohttp.signals.Signal" title="aiohttp.signals.Signal"><code class="xref py py-class docutils literal"><span class="pre">Signal</span></code></a> that is fired at the beginning
of <a class="reference internal" href="#aiohttp.web.StreamResponse.prepare" title="aiohttp.web.StreamResponse.prepare"><code class="xref py py-meth docutils literal"><span class="pre">StreamResponse.prepare()</span></code></a> with parameters <em>request</em> and
<em>response</em>. It can be used, for example, to add custom headers to each
response before sending.</p>
<p>Signal handlers should have the following signature:</p>
<div class="highlight-python"><div class="highlight"><pre>async def handler(request, response):
    pass
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.Application.make_handler">
<code class="descname">make_handler</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web.html#Application.make_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Application.make_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates HTTP protocol factory for handling requests.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; additional parameters for <code class="xref py py-class docutils literal"><span class="pre">RequestHandlerFactory</span></code>
constructor.</td>
</tr>
</tbody>
</table>
<p>You should pass result of the method as <em>protocol_factory</em> to
<code class="xref py py-meth docutils literal"><span class="pre">create_server()</span></code>, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre>loop = asyncio.get_event_loop()

app = Application(loop=loop)

# setup route table
# app.router.add_route(...)

await loop.create_server(app.make_handler(),
                         &#39;0.0.0.0&#39;, 8080)
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.Application.finish">
<em class="property">coroutine </em><code class="descname">finish</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web.html#Application.finish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Application.finish" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#coroutine" title="(in Python v3.5)"><span class="xref std std-ref">coroutine</span></a> that should be called after
server stopping.</p>
<p>This method executes functions registered by
<code class="xref py py-meth docutils literal"><span class="pre">register_on_finish()</span></code> in LIFO order.</p>
<p>If callback raises an exception, the error will be stored by
<a class="reference external" href="http://docs.python.org/3/library/asyncio-eventloop.html#asyncio.BaseEventLoop.call_exception_handler" title="(in Python v3.5)"><code class="xref py py-meth docutils literal"><span class="pre">call_exception_handler()</span></code></a> with keys:
<em>message</em>, <em>exception</em>, <em>application</em>.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">register_on_finish(self, func, *args, **kwargs):</code></dt>
<dd><p>Register <em>func</em> as a function to be executed at termination.
Any optional arguments that are to be passed to <em>func</em> must be
passed as arguments to <code class="xref py py-meth docutils literal"><span class="pre">register_on_finish()</span></code>.  It is possible to
register the same function and arguments more than once.</p>
<p>During the call of <a class="reference internal" href="#aiohttp.web.Application.finish" title="aiohttp.web.Application.finish"><code class="xref py py-meth docutils literal"><span class="pre">finish()</span></code></a> all functions registered are called in
last in, first out order.</p>
<p><em>func</em> may be either regular function or <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#coroutine" title="(in Python v3.5)"><span class="xref std std-ref">coroutine</span></a>,
<a class="reference internal" href="#aiohttp.web.Application.finish" title="aiohttp.web.Application.finish"><code class="xref py py-meth docutils literal"><span class="pre">finish()</span></code></a> will un-yield (<cite>await</cite>) the later.</p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Application object has <a class="reference internal" href="#aiohttp.web.Application.router" title="aiohttp.web.Application.router"><code class="xref py py-attr docutils literal"><span class="pre">router</span></code></a> attribute but has no
<code class="docutils literal"><span class="pre">add_route()</span></code> method. The reason is: we want to support
different router implementations (even maybe not url-matching
based but traversal ones).</p>
<p>For sake of that fact we have very trivial ABC for
<code class="xref py py-class docutils literal"><span class="pre">AbstractRouter</span></code>: it should have only
<code class="xref py py-meth docutils literal"><span class="pre">AbstractRouter.resolve()</span></code> coroutine.</p>
<p class="last">No methods for adding routes or route reversing (getting URL by
route name). All those are router implementation details (but,
sure, you need to deal with that methods after choosing the
router for your application).</p>
</div>
</dd></dl>

</div>
<div class="section" id="requesthandlerfactory">
<h3>RequestHandlerFactory<a class="headerlink" href="#requesthandlerfactory" title="Permalink to this headline">¶</a></h3>
<p>RequestHandlerFactory is responsible for creating HTTP protocol objects that
can handle HTTP connections.</p>
<blockquote>
<div><dl class="attribute">
<dt id="aiohttp.web.connections">
<code class="descclassname">aiohttp.web.</code><code class="descname">connections</code><a class="headerlink" href="#aiohttp.web.connections" title="Permalink to this definition">¶</a></dt>
<dd><p>List of all currently opened connections.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.finish_connections">
<code class="descclassname">aiohttp.web.</code><code class="descname">finish_connections</code><span class="sig-paren">(</span><em>timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#aiohttp.web.finish_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#coroutine" title="(in Python v3.5)"><span class="xref std std-ref">coroutine</span></a> that should be called to close all opened
connections.</p>
</dd></dl>

</div></blockquote>
</div>
<div class="section" id="router">
<h3>Router<a class="headerlink" href="#router" title="Permalink to this headline">¶</a></h3>
<p>For dispatching URLs to <a class="reference internal" href="web.html#aiohttp-web-handler"><span>handlers</span></a>
<a class="reference internal" href="#module-aiohttp.web" title="aiohttp.web"><code class="xref py py-mod docutils literal"><span class="pre">aiohttp.web</span></code></a> uses <em>routers</em>.</p>
<p>Router is any object that implements <code class="xref py py-class docutils literal"><span class="pre">AbstractRouter</span></code> interface.</p>
<p><a class="reference internal" href="#module-aiohttp.web" title="aiohttp.web"><code class="xref py py-mod docutils literal"><span class="pre">aiohttp.web</span></code></a> provides an implementation called <a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal"><span class="pre">UrlDispatcher</span></code></a>.</p>
<p><a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal"><span class="pre">Application</span></code></a> uses <a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal"><span class="pre">UrlDispatcher</span></code></a> as <code class="xref py py-meth docutils literal"><span class="pre">router()</span></code> by default.</p>
<dl class="class">
<dt id="aiohttp.web.UrlDispatcher">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">UrlDispatcher</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Straightforward url-matching router, implements
<a class="reference external" href="http://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">collections.abc.Mapping</span></code></a> for access to <em>named routes</em>.</p>
<p>Before running <a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal"><span class="pre">Application</span></code></a> you should fill <em>route
table</em> first by calling <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal"><span class="pre">add_route()</span></code></a> and <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_static" title="aiohttp.web.UrlDispatcher.add_static"><code class="xref py py-meth docutils literal"><span class="pre">add_static()</span></code></a>.</p>
<p><a class="reference internal" href="web.html#aiohttp-web-handler"><span>Handler</span></a> lookup is performed by iterating on
added <em>routes</em> in FIFO order. The first matching <em>route</em> will be used
to call corresponding <em>handler</em>.</p>
<p>If on route creation you specify <em>name</em> parameter the result is
<em>named route</em>.</p>
<p><em>Named route</em> can be retrieved by <code class="docutils literal"><span class="pre">app.router[name]</span></code> call, checked for
existence by <code class="docutils literal"><span class="pre">name</span> <span class="pre">in</span> <span class="pre">app.router</span></code> etc.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp-web-route"><span>Route classes</span></a></p>
</div>
<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_route">
<code class="descname">add_route</code><span class="sig-paren">(</span><em>method</em>, <em>path</em>, <em>handler</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_route"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_route" title="Permalink to this definition">¶</a></dt>
<dd><p>Append <a class="reference internal" href="web.html#aiohttp-web-handler"><span>handler</span></a> to the end of route table.</p>
<dl class="docutils">
<dt><em>path</em> may be either <em>constant</em> string like <code class="docutils literal"><span class="pre">'/a/b/c'</span></code> or</dt>
<dd><em>variable rule</em> like <code class="docutils literal"><span class="pre">'/a/{var}'</span></code> (see
<a class="reference internal" href="web.html#aiohttp-web-variable-handler"><span>handling variable pathes</span></a>)</dd>
</dl>
<p>Pay attention please: <em>handler</em> is converted to coroutine internally when
it is a regular function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>method</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; <p>HTTP method for route. Should be one of
<code class="docutils literal"><span class="pre">'GET'</span></code>, <code class="docutils literal"><span class="pre">'POST'</span></code>, <code class="docutils literal"><span class="pre">'PUT'</span></code>,
<code class="docutils literal"><span class="pre">'DELETE'</span></code>, <code class="docutils literal"><span class="pre">'PATCH'</span></code>, <code class="docutils literal"><span class="pre">'HEAD'</span></code>,
<code class="docutils literal"><span class="pre">'OPTIONS'</span></code> or <code class="docutils literal"><span class="pre">'*'</span></code> for any method.</p>
<p>The parameter is case-insensitive, e.g. you
can push <code class="docutils literal"><span class="pre">'get'</span></code> as well as <code class="docutils literal"><span class="pre">'GET'</span></code>.</p>
</li>
<li><strong>path</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; route path. Should be started with slash (<code class="docutils literal"><span class="pre">'/'</span></code>).</li>
<li><strong>handler</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#callable" title="(in Python v3.5)"><em>callable</em></a>) &#8211; route handler.</li>
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; optional route name.</li>
<li><strong>expect_handler</strong> (<em>coroutine</em>) &#8211; optional <em>expect</em> header handler.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">new <a class="reference internal" href="#aiohttp.web.PlainRoute" title="aiohttp.web.PlainRoute"><code class="xref py py-class docutils literal"><span class="pre">PlainRoute</span></code></a> or <a class="reference internal" href="#aiohttp.web.DynamicRoute" title="aiohttp.web.DynamicRoute"><code class="xref py py-class docutils literal"><span class="pre">DynamicRoute</span></code></a> instance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_static">
<code class="descname">add_static</code><span class="sig-paren">(</span><em>prefix</em>, <em>path</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em>, <em>chunk_size=256*1024</em>, <em>response_factory=StreamResponse</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_static"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_static" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds router for returning static files.</p>
<p>Useful for handling static content like images, javascript and css files.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Use <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_static" title="aiohttp.web.UrlDispatcher.add_static"><code class="xref py py-meth docutils literal"><span class="pre">add_static()</span></code></a> for development only. In production,
static content should be processed by web servers like <em>nginx</em>
or <em>apache</em>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>prefix</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; URL path prefix for handled static files</li>
<li><strong>path</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; path to the folder in file system that contains
handled static files.</li>
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; optional route name.</li>
<li><strong>expect_handler</strong> (<em>coroutine</em>) &#8211; optional <em>expect</em> header handler.</li>
<li><strong>chunk_size</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#int" title="(in Python v3.5)"><em>int</em></a>) &#8211; <p>size of single chunk for file
downloading, 64Kb by default.</p>
<p>Increasing <em>chunk_size</em> parameter to,
say, 1Mb may increase file downloading
speed but consumes more memory.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.16.</span></p>
</div>
</li>
<li><strong>response_factory</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#callable" title="(in Python v3.5)"><em>callable</em></a>) &#8211; <p>factory to use to generate a new
response, defaults to
<a class="reference internal" href="#aiohttp.web.StreamResponse" title="aiohttp.web.StreamResponse"><code class="xref py py-class docutils literal"><span class="pre">StreamResponse</span></code></a> and should
expose a compatible API.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.17.</span></p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">new <a class="reference internal" href="#aiohttp.web.StaticRoute" title="aiohttp.web.StaticRoute"><code class="xref py py-class docutils literal"><span class="pre">StaticRoute</span></code></a> instance.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.resolve">
<em class="property">coroutine </em><code class="descname">resolve</code><span class="sig-paren">(</span><em>requst</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.resolve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#coroutine" title="(in Python v3.5)"><span class="xref std std-ref">coroutine</span></a> that returns
<code class="xref py py-class docutils literal"><span class="pre">AbstractMatchInfo</span></code> for <em>request</em>.</p>
<p>The method never raises exception, but returns
<code class="xref py py-class docutils literal"><span class="pre">AbstractMatchInfo</span></code> instance with:</p>
<ol class="arabic">
<li><p class="first"><code class="xref py py-attr docutils literal"><span class="pre">route</span></code> assigned to
<a class="reference internal" href="#aiohttp.web.SystemRoute" title="aiohttp.web.SystemRoute"><code class="xref py py-class docutils literal"><span class="pre">SystemRoute</span></code></a> instance</p>
</li>
<li><p class="first"><code class="xref py py-attr docutils literal"><span class="pre">handler</span></code> which raises
<code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code> or <code class="xref py py-exc docutils literal"><span class="pre">HTTPMethodNotAllowed</span></code> on handler&#8217;s
execution if there is no registered route for <em>request</em>.</p>
<p><em>Middlewares</em> can process that exceptions to render
pretty-looking error page for example.</p>
</li>
</ol>
<p>Used by internal machinery, end user unlikely need to call the method.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The method uses <a class="reference internal" href="#aiohttp.web.Request.raw_path" title="aiohttp.web.Request.raw_path"><code class="xref py py-attr docutils literal"><span class="pre">Request.raw_path</span></code></a> for pattern
matching against registered routes.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.14: </span>The method don&#8217;t raise <code class="xref py py-exc docutils literal"><span class="pre">HTTPNotFound</span></code> and
<code class="xref py py-exc docutils literal"><span class="pre">HTTPMethodNotAllowed</span></code> anymore.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.routes">
<code class="descname">routes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.routes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.routes" title="Permalink to this definition">¶</a></dt>
<dd><p>The method returns a <em>view</em> for <em>all</em> registered routes.</p>
<p>The view is an object that allows to:</p>
<ol class="arabic">
<li><p class="first">Get size of the router table:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">len</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">routes</span><span class="p">())</span>
</pre></div>
</div>
</li>
<li><p class="first">Iterate over registered routes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">route</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">routes</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">route</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Make a check if the route is registered in the router table:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">route</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">routes</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.18.</span></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="route">
<span id="aiohttp-web-route"></span><h3>Route<a class="headerlink" href="#route" title="Permalink to this headline">¶</a></h3>
<p>Default router <a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal"><span class="pre">UrlDispatcher</span></code></a> operates with <em>routes</em>.</p>
<p>User should not instantiate route classes by hand but can give <em>named
route instance</em> by <code class="docutils literal"><span class="pre">router[name]</span></code> if he have added route by
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal"><span class="pre">UrlDispatcher.add_route()</span></code></a> or <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_static" title="aiohttp.web.UrlDispatcher.add_static"><code class="xref py py-meth docutils literal"><span class="pre">UrlDispatcher.add_static()</span></code></a>
calls with non-empty <em>name</em> parameter.</p>
<p>The main usage of <em>named routes</em> is constructing URL by route name for
passing it into <em>template engine</em> for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">url</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="p">[</span><span class="s">&#39;route_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
</pre></div>
</div>
<p>There are three concrete route classes:</p>
<ul class="simple">
<li><a class="reference internal" href="#aiohttp.web.PlainRoute" title="aiohttp.web.PlainRoute"><code class="xref py py-class docutils literal"><span class="pre">PlainRoute</span></code></a> for urls without <a class="reference internal" href="web.html#aiohttp-web-variable-handler"><span>variable
pathes</span></a> spec.</li>
<li><a class="reference internal" href="#aiohttp.web.DynamicRoute" title="aiohttp.web.DynamicRoute"><code class="xref py py-class docutils literal"><span class="pre">DynamicRoute</span></code></a> for urls with <a class="reference internal" href="web.html#aiohttp-web-variable-handler"><span>variable
pathes</span></a> spec.</li>
<li><a class="reference internal" href="#aiohttp.web.StaticRoute" title="aiohttp.web.StaticRoute"><code class="xref py py-class docutils literal"><span class="pre">StaticRoute</span></code></a> for static file handlers.</li>
</ul>
<dl class="class">
<dt id="aiohttp.web.Route">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">Route</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#Route"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Route" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for routes served by <a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal"><span class="pre">UrlDispatcher</span></code></a>.</p>
<dl class="attribute">
<dt id="aiohttp.web.Route.method">
<code class="descname">method</code><a class="headerlink" href="#aiohttp.web.Route.method" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>HTTP method handled by the route, e.g. <em>GET</em>, <em>POST</em> etc.</p>
<dl class="attribute">
<dt id="aiohttp.web.Route.handler">
<code class="descname">handler</code><a class="headerlink" href="#aiohttp.web.Route.handler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="web.html#aiohttp-web-handler"><span>handler</span></a> that processes the route.</p>
<dl class="attribute">
<dt id="aiohttp.web.Route.name">
<code class="descname">name</code><a class="headerlink" href="#aiohttp.web.Route.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Name of the route.</p>
<dl class="method">
<dt id="aiohttp.web.Route.match">
<code class="descname">match</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#Route.match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Route.match" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Abstract method, accepts <em>URL path</em> and returns <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a> with
parsed <em>path parts</em> for <a class="reference internal" href="#aiohttp.web.UrlMappingMatchInfo" title="aiohttp.web.UrlMappingMatchInfo"><code class="xref py py-class docutils literal"><span class="pre">UrlMappingMatchInfo</span></code></a> or <code class="docutils literal"><span class="pre">None</span></code> if
the route cannot handle given <em>path</em>.</p>
<p>The method exists for internal usage, end user unlikely need to call it.</p>
<dl class="method">
<dt id="aiohttp.web.Route.url">
<code class="descname">url</code><span class="sig-paren">(</span><em>*</em>, <em>query=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#Route.url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Route.url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Abstract method for constructing url handled by the route.</p>
<p><em>query</em> is a mapping or list of <em>(name, value)</em> pairs for
specifying <em>query</em> part of url (parameter is processed by
<a class="reference external" href="http://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlencode" title="(in Python v3.5)"><code class="xref py py-func docutils literal"><span class="pre">urlencode()</span></code></a>).</p>
<p>Other available parameters depends on concrete route class and
described in descendant classes.</p>
</dd></dl>

<dl class="class">
<dt id="aiohttp.web.PlainRoute">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">PlainRoute</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#PlainRoute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.PlainRoute" title="Permalink to this definition">¶</a></dt>
<dd><p>The route class for handling plain <em>URL path</em>, e.g. <code class="docutils literal"><span class="pre">&quot;/a/b/c&quot;</span></code></p>
<dl class="method">
<dt id="aiohttp.web.PlainRoute.url">
<code class="descname">url</code><span class="sig-paren">(</span><em>*</em>, <em>parts</em>, <em>query=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#PlainRoute.url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.PlainRoute.url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Construct url, doesn&#8217;t accepts extra parameters:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">route</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;d&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
<span class="go">&#39;/a/b/c/?d=1&amp;e=2&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="aiohttp.web.DynamicRoute">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">DynamicRoute</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#DynamicRoute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.DynamicRoute" title="Permalink to this definition">¶</a></dt>
<dd><p>The route class for handling <a class="reference internal" href="web.html#aiohttp-web-variable-handler"><span>variable
path</span></a>, e.g. <code class="docutils literal"><span class="pre">&quot;/a/{name1}/{name2}&quot;</span></code></p>
<dl class="method">
<dt id="aiohttp.web.DynamicRoute.url">
<code class="descname">url</code><span class="sig-paren">(</span><em>*</em>, <em>parts</em>, <em>query=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#DynamicRoute.url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.DynamicRoute.url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Construct url with given <em>dynamic parts</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">route</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="n">parts</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;name1&#39;</span><span class="p">:</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;name2&#39;</span><span class="p">:</span> <span class="s">&#39;c&#39;</span><span class="p">},</span>
<span class="go">              query={&#39;d&#39;: 1, &#39;e&#39;: 2})</span>
<span class="go">&#39;/a/b/c/?d=1&amp;e=2&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="aiohttp.web.StaticRoute">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">StaticRoute</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#StaticRoute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StaticRoute" title="Permalink to this definition">¶</a></dt>
<dd><p>The route class for handling static files, created by
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_static" title="aiohttp.web.UrlDispatcher.add_static"><code class="xref py py-meth docutils literal"><span class="pre">UrlDispatcher.add_static()</span></code></a> call.</p>
<dl class="method">
<dt id="aiohttp.web.StaticRoute.url">
<code class="descname">url</code><span class="sig-paren">(</span><em>*</em>, <em>filename</em>, <em>query=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#StaticRoute.url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StaticRoute.url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Construct url for given <em>filename</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">route</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s">&#39;img/logo.png&#39;</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;param&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="go">&#39;/path/to/static/img/logo.png?param=1&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="aiohttp.web.SystemRoute">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">SystemRoute</code><a class="headerlink" href="#aiohttp.web.SystemRoute" title="Permalink to this definition">¶</a></dt>
<dd><p>The route class for internal purposes.</p>
<p>Now it has used for handling <em>404: Not Found</em> and <em>405: Method Not Allowed</em>.</p>
<dl class="method">
<dt id="aiohttp.web.SystemRoute.url">
<code class="descname">url</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#aiohttp.web.SystemRoute.url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Always raises <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.5)"><code class="xref py py-exc docutils literal"><span class="pre">RuntimeError</span></code></a>, <a class="reference internal" href="#aiohttp.web.SystemRoute" title="aiohttp.web.SystemRoute"><code class="xref py py-class docutils literal"><span class="pre">SystemRoute</span></code></a> should not
be used in url construction expressions.</p>
</dd></dl>

</div>
<div class="section" id="matchinfo">
<h3>MatchInfo<a class="headerlink" href="#matchinfo" title="Permalink to this headline">¶</a></h3>
<p>After route matching web application calls found handler if any.</p>
<p>Matching result can be accessible from handler as
<a class="reference internal" href="#aiohttp.web.Request.match_info" title="aiohttp.web.Request.match_info"><code class="xref py py-attr docutils literal"><span class="pre">Request.match_info</span></code></a> attribute.</p>
<p>In general the result may be any object derived from
<code class="xref py py-class docutils literal"><span class="pre">AbstractMatchInfo</span></code> (<a class="reference internal" href="#aiohttp.web.UrlMappingMatchInfo" title="aiohttp.web.UrlMappingMatchInfo"><code class="xref py py-class docutils literal"><span class="pre">UrlMappingMatchInfo</span></code></a> for default
<a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal"><span class="pre">UrlDispatcher</span></code></a> router).</p>
<dl class="class">
<dt id="aiohttp.web.UrlMappingMatchInfo">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">UrlMappingMatchInfo</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlMappingMatchInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlMappingMatchInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Inherited from <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a> and <code class="xref py py-class docutils literal"><span class="pre">AbstractMatchInfo</span></code>. Dict
items are given from <a class="reference internal" href="#aiohttp.web.Route.match" title="aiohttp.web.Route.match"><code class="xref py py-meth docutils literal"><span class="pre">Route.match()</span></code></a> call return value.</p>
<dl class="attribute">
<dt id="aiohttp.web.UrlMappingMatchInfo.route">
<code class="descname">route</code><a class="headerlink" href="#aiohttp.web.UrlMappingMatchInfo.route" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="#aiohttp.web.Route" title="aiohttp.web.Route"><code class="xref py py-class docutils literal"><span class="pre">Route</span></code></a> instance for url matching.</p>
</dd></dl>

</div>
</div>
<div class="section" id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aiohttp.web.FileField">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">FileField</code><a class="headerlink" href="#aiohttp.web.FileField" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="http://docs.python.org/3/library/collections.html#collections.namedtuple" title="(in Python v3.5)"><code class="xref py py-func docutils literal"><span class="pre">namedtuple()</span></code></a> that is returned as multidict value
by <a class="reference internal" href="#aiohttp.web.Request.POST" title="aiohttp.web.Request.POST"><code class="xref py py-meth docutils literal"><span class="pre">Request.POST()</span></code></a> if field is uploaded file.</p>
<dl class="attribute">
<dt id="aiohttp.web.FileField.name">
<code class="descname">name</code><a class="headerlink" href="#aiohttp.web.FileField.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Field name</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.FileField.filename">
<code class="descname">filename</code><a class="headerlink" href="#aiohttp.web.FileField.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>File name as specified by uploading (client) side.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.FileField.file">
<code class="descname">file</code><a class="headerlink" href="#aiohttp.web.FileField.file" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference external" href="http://docs.python.org/3/library/io.html#io.IOBase" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">io.IOBase</span></code></a> instance with content of uploaded file.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.FileField.content_type">
<code class="descname">content_type</code><a class="headerlink" href="#aiohttp.web.FileField.content_type" title="Permalink to this definition">¶</a></dt>
<dd><p><em>MIME type</em> of uploaded file, <code class="docutils literal"><span class="pre">'text/plain'</span></code> by default.</p>
</dd></dl>

<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web.html#aiohttp-web-file-upload"><span>File Uploads</span></a></p>
</div>
</dd></dl>

</div>
<div class="section" id="constants">
<h2>Constants<a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aiohttp.web.ContentCoding">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">ContentCoding</code><a class="reference internal" href="_modules/aiohttp/web_reqrep.html#ContentCoding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.ContentCoding" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference external" href="http://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">enum.Enum</span></code></a> class of available Content Codings.</p>
<dl class="attribute">
<dt id="aiohttp.web.ContentCoding.deflate">
<code class="descname">deflate</code><a class="headerlink" href="#aiohttp.web.ContentCoding.deflate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.ContentCoding.gzip">
<code class="descname">gzip</code><a class="headerlink" href="#aiohttp.web.ContentCoding.gzip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.ContentCoding.identity">
<code class="descname">identity</code><a class="headerlink" href="#aiohttp.web.ContentCoding.identity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<div class="feed-disqus">
<div id="disqus_thread"></div>
<script type="text/javascript">
var disqus_shortname = "aiohttp";
var disqus_identifier = "/web_reference";
var disqus_developer = "1";

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div></div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/aiohttp-icon-128x128.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">http client/server for asyncio</p>



<p>
<iframe src="https://ghbtns.com/github-btn.html?user=KeepSafe&repo=aiohttp&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>




    

<p>
<a href="https://travis-ci.org/KeepSafe/aiohttp">
    <img
        alt="https://secure.travis-ci.org/KeepSafe/aiohttp.png?branch=master"
        src="https://secure.travis-ci.org/KeepSafe/aiohttp.png?branch=master"
    >
</a>
</p>
<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="client.html">HTTP Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="client_reference.html">HTTP Client Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="client_websockets.html">WebSockets Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="web.html">HTTP Server Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">HTTP Server Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#request">Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="#response-classes">Response classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#streamresponse">StreamResponse</a></li>
<li class="toctree-l3"><a class="reference internal" href="#response">Response</a></li>
<li class="toctree-l3"><a class="reference internal" href="#websocketresponse">WebSocketResponse</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#application-and-router">Application and Router</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#application">Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requesthandlerfactory">RequestHandlerFactory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#router">Router</a></li>
<li class="toctree-l3"><a class="reference internal" href="#route">Route</a></li>
<li class="toctree-l3"><a class="reference internal" href="#matchinfo">MatchInfo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#utilities">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#constants">Constants</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Low-level HTTP Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="multidict.html">Multidicts</a></li>
<li class="toctree-l1"><a class="reference internal" href="multipart.html">Working with Multipart</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Helpers API</a></li>
<li class="toctree-l1"><a class="reference internal" href="gunicorn.html">Deployment using Gunicorn</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">CHANGES</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2013, 2014, 2015, KeepSafe.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/web_reference.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/KeepSafe/aiohttp" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>